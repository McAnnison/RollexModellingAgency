<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin | Rolex Modelling Agency</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
        <style>
            body { font-family: 'Inter', sans-serif; background-color: #fbfaf8; color: #111827; }
            .serif { font-family: 'Playfair Display', serif; }
            .accent-gradient { background: linear-gradient(135deg, #B76E79, #C9A227); }
            .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(17, 24, 39, 0.08); }
            .soft-shadow { box-shadow: 0 30px 60px rgba(17, 24, 39, 0.10); }
            .focus-ring:focus { outline: 2px solid rgba(183, 110, 121, 0.7); outline-offset: 3px; }
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }
        </style>
    </head>
    <body>
        <nav class="sticky top-0 z-50 px-6 md:px-10 py-6 flex justify-between items-center bg-[#fbfaf8]/80" style="backdrop-filter: blur(10px);">
            <a href="index.html" class="flex items-center gap-3 serif text-lg md:text-xl tracking-widest font-bold focus-ring rounded-sm">
                <img src="assets/logo.jpeg" alt="Rolex Modeling Agency logo" class="w-12 h-12 object-contain" loading="eager" decoding="async">
                <span>
                    ROLEX MODELLING <br><span class="text-[10px] font-light tracking-[0.35em] uppercase opacity-70">AGENCY</span>
                </span>
            </a>
            <div class="flex items-center gap-6">
                <a href="index.html" class="text-[11px] tracking-widest uppercase opacity-70 hover:opacity-100 transition-opacity focus-ring rounded-sm">Home</a>
                <a href="admin.html" class="text-[11px] tracking-widest uppercase opacity-100">Admin</a>
            </div>
        </nav>

        <header class="relative overflow-hidden">
            <div class="absolute inset-0 opacity-20">
                <img src="https://images.unsplash.com/photo-1520975693410-0018f0f5e6a2?auto=format&fit=crop&q=80&w=2000" alt="" class="w-full h-full object-cover" loading="eager" fetchpriority="high" decoding="async" />
            </div>
            <div class="absolute inset-0 bg-gradient-to-b from-white/90 via-white/70 to-[#fbfaf8]/95"></div>
            <div class="relative px-6 md:px-10 py-16 md:py-20 max-w-6xl mx-auto">
                <p class="text-[11px] tracking-[0.32em] uppercase opacity-60">Admin</p>
                <h1 class="serif text-5xl md:text-6xl tracking-tight mt-3">Applications dashboard</h1>
                <p class="mt-4 max-w-2xl text-sm md:text-base opacity-80">
                    Review new submissions, update status, and download assets.
                </p>
                <div class="mt-8 h-1 w-20 accent-gradient rounded-full"></div>
            </div>
        </header>

        <main class="px-6 md:px-10 pb-16">
            <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-8 -mt-10">
                <section class="glass soft-shadow rounded-3xl p-8 md:p-10">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div>
                            <h2 class="serif text-3xl">Submissions</h2>
                            <p class="text-[11px] tracking-[0.24em] uppercase opacity-60">Live Firestore feed</p>
                        </div>
                        <div class="flex gap-3">
                            <input id="searchInput" type="text" placeholder="Search name or email" class="focus-ring bg-transparent border-b border-black/15 py-2 px-2 text-sm focus:outline-none focus:border-black/40" />
                            <select id="statusFilter" class="focus-ring bg-transparent border-b border-black/15 py-2 px-2 text-sm focus:outline-none focus:border-black/40">
                                <option value="">All</option>
                                <option value="submitted">Submitted</option>
                                <option value="reviewing">Reviewing</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                    </div>

                    <div id="adminNotice" class="mt-6 hidden rounded-2xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700"></div>
                    <div id="loadingState" class="mt-6 text-sm opacity-60">Loading applications…</div>

                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full text-left text-sm" aria-label="Applications table">
                            <thead class="text-[11px] tracking-[0.24em] uppercase opacity-60 border-b border-black/10">
                                <tr>
                                    <th class="py-3 pr-4">Applicant</th>
                                    <th class="py-3 pr-4">Email</th>
                                    <th class="py-3 pr-4">Status</th>
                                    <th class="py-3 pr-4">Submitted</th>
                                    <th class="py-3 pr-4">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="applicationsBody"></tbody>
                        </table>
                    </div>
                </section>

                <aside class="glass soft-shadow rounded-3xl p-8 md:p-10">
                    <h2 class="serif text-3xl">Admin access</h2>
                    <p class="mt-3 text-sm opacity-70">Sign in with an admin account. Your token must include the admin claim.</p>

                    <form id="loginForm" class="mt-6 space-y-4">
                        <div>
                            <label for="adminEmail" class="sr-only">Email address</label>
                            <input id="adminEmail" name="adminEmail" type="email" placeholder="Admin email" required
                                class="focus-ring w-full bg-transparent border-b border-black/15 py-3 focus:outline-none focus:border-black/40 transition-colors placeholder:text-black/30">
                        </div>
                        <div>
                            <label for="adminPassword" class="sr-only">Password</label>
                            <input id="adminPassword" name="adminPassword" type="password" placeholder="Password" required
                                class="focus-ring w-full bg-transparent border-b border-black/15 py-3 focus:outline-none focus:border-black/40 transition-colors placeholder:text-black/30">
                        </div>
                        <button type="submit" class="accent-gradient text-white w-full py-3 rounded-full uppercase tracking-widest text-xs font-bold soft-shadow transition-opacity hover:opacity-90 focus-ring">
                            Sign in
                        </button>
                    </form>

                    <div id="signedInPanel" class="mt-6 hidden">
                        <p class="text-sm opacity-70">Signed in as</p>
                        <p id="signedInEmail" class="mt-1 font-semibold"></p>
                        <button id="signOutBtn" type="button" class="mt-4 w-full py-2 rounded-full border border-black/20 text-xs uppercase tracking-widest font-semibold focus-ring">
                            Sign out
                        </button>
                    </div>

                    <div class="mt-8 text-[11px] tracking-[0.24em] uppercase opacity-60">Tips</div>
                    <ul class="mt-3 text-xs opacity-70 space-y-2">
                        <li>Only admins can read applications.</li>
                        <li>Status updates are saved immediately.</li>
                        <li>Storage files are private unless admin.</li>
                    </ul>
                </aside>
            </div>
        </main>

        <div id="detailDrawer" class="fixed inset-0 z-[120] hidden items-center justify-center bg-black/30 p-6" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
            <div class="glass soft-shadow w-full max-w-3xl rounded-3xl p-8 relative">
                <button id="detailClose" type="button" class="absolute top-4 right-4 w-10 h-10 rounded-full accent-gradient text-white transition-opacity hover:opacity-90 focus-ring" aria-label="Close">
                    <span aria-hidden="true">✕</span>
                </button>
                <p class="text-[11px] tracking-[0.32em] uppercase opacity-60">Application</p>
                <h3 id="detailTitle" class="serif text-4xl mt-2">Applicant</h3>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                    <div>
                        <p class="text-[11px] tracking-[0.24em] uppercase opacity-60">Contact</p>
                        <p id="detailEmail" class="mt-2"></p>
                        <p id="detailPhone" class="mt-1"></p>
                        <p id="detailInstagram" class="mt-1"></p>
                    </div>
                    <div>
                        <p class="text-[11px] tracking-[0.24em] uppercase opacity-60">Specs</p>
                        <p id="detailHeight" class="mt-2"></p>
                        <p id="detailWaist" class="mt-1"></p>
                        <p id="detailShoe" class="mt-1"></p>
                        <p id="detailEye" class="mt-1"></p>
                    </div>
                </div>
                <div class="mt-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <p class="text-[11px] tracking-[0.24em] uppercase opacity-60">Status</p>
                        <select id="detailStatus" class="mt-2 focus-ring bg-transparent border-b border-black/15 py-2 px-2 text-sm focus:outline-none focus:border-black/40">
                            <option value="submitted">Submitted</option>
                            <option value="reviewing">Reviewing</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    <div>
                        <p class="text-[11px] tracking-[0.24em] uppercase opacity-60">Uploads</p>
                        <div class="mt-2 flex flex-wrap gap-3" id="detailUploads"></div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
        <script>
            window.FIREBASE_CONFIG = {
                apiKey: "AIzaSyBZsPqtu2a0A-75HvQxa14v9KY1vS4pPdc",
                authDomain: "rolex-modelling.firebaseapp.com",
                projectId: "rolex-modelling",
                storageBucket: "rolex-modelling.firebasestorage.app",
                messagingSenderId: "633376014550",
                appId: "1:633376014550:web:a6a993a9805d8db8340977",
                measurementId: "G-FYY4BM20PR"
            };
        </script>
        <script src="js/admin.js"></script>
    </body>
</html>
